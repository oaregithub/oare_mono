import * as Knex from 'knex';

export async function up(knex: Knex): Promise<void> {
  const tableExists = await knex.schema.hasTable('page_content');

  if (!tableExists) {
    knex.schema.createTable('page_content', table => {
      table.increments('id');
      table.string('page').notNullable();
      table.text('content').notNullable();
    });
  }

  const existingData = [
    {
      page: '/about',
      content:
        '&lt;template&gt;\n  &lt;OareContentView&gt;\n    &lt;div class=&quot;title font-weight-regular&quot;&gt;\n      &lt;p&gt;\n        oare.byu.edu is an ongoing project with the aim to becoming a valuable\n        research environment for Old Assyrian Studies. The database is inspired\n        by the Online Cultural Heritage Research Environment\n        (ochre.uchicago.edu) but is a simplified, SQL implementation of some of\n        the concepts developed there, with some particular tools developed\n        specifically for editing cuneiform texts and the extension of projects\n        involved in articulating the syntactic relationships of words, phrases,\n        clauses, etc. and by extension, the persons, assets, transactions, and\n        events they recorded.\n      &lt;/p&gt;\n\n      &lt;p&gt;To read more here about the data structure of oare.&lt;/p&gt;\n\n      &lt;p&gt;\n        oare.byu.edu was organized and directed by Edward Stratford, Brigham\n        Young University, but is the beneficiary of help from a great number of\n        other individuals.\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        Roughly half the published texts available on the website were first\n        digitized by Karl Hecker and made available to the Old Assyrian Text\n        project. Without his first efforts, this project would be far behind\n        where it is now. Other members of the Old Assyrian Text Project also\n        contributed to the accumulation of digitized forms of texts and deserve\n        great thanks: Cecile Michele, Gojko Barjamovic, Guido Kryszat, Jan\n        Gerrit Dercksen, Klaas Veenhof, Mogens Trolle Larsen, Thomas Hertel.\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        A number of other specialists have kindly offered comments and feedback,\n        including Bert Kouwenberg and Hakan Erol.\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        Jonathon Hanna (BYU student) converted the OCHRE export into SQL and\n        helped shepherd the post-conversion cleanup and SQL implementation of\n        the dataset. Brett Fisher (BYU student, graduated) setting up the JS\n        project, the AWS hosting arrangement, integration of the SQL and the\n        first major iteration of the site. Harrison Bludworth (BYU student) has\n        overseen the project starting summer 2021, and implemented numerous\n        improvements, including the import and edit modules.\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        Thanks also to Tyler Mortenson, Jooyeon Park, Justis Brown, Kyungwoo Jo,\n        and Hongjoon Jun for the full stack development.\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        A significant number of students from BYU participated in enhancing the\n        textual data while in OCHRE: Alexa Blankenship, Allison Malmrose, Audrey\n        Gabrielson, Brenton Erickson, Britta Johnson, Brittany Wallace, Catie\n        Ashley, Chandler Helvey, Christina Nelson, Colton Kunz, Courtney Dotson,\n        David Ferguson, David Ridge, David Romney, Emily Peterson, Emily\n        Yankura, Jackie Davis, Jacob Murphy, Jake Inman, James Conway, Jason\n        Saunders, Jeremy Madsen, Jeremy Schone, Jessica Dildine, Jessica Smith,\n        Jessica Brown, JoLynne Minnick, Jonathon Nelson, Jordan Oseen, Kaili\n        Sparks, Karlie Alldredge, Katherine Morse, Kayli Thomson, Kelsie Cannon,\n        Lara Mayfield, Leonor Arnesen, Matilde Oreilly, Matthew Lin, McKenzi\n        Christensen, Merna Raines, Michael Godfrey, Michael Trotter, Michaela\n        Shurts, Natalie Merten, Nathan May, Nora Corcoran, Paul Gauthier, Ryan\n        Winters, Sarah Rounsville, Stephanie Moffit, Stine Plomgren, Stuart\n        Cooke, Thomas Richins, Trevor Murphy, Tyler Harris\n      &lt;/p&gt;\n\n      &lt;p&gt;\n        Thank you to the following who prepared and imported texts into the\n        OCHRE project: Andrew Dix, Annie Schloen, Jae-Hwan Kim.\n      &lt;/p&gt;\n    &lt;/div&gt;\n  &lt;/OareContentView&gt;\n&lt;/template&gt;',
    },
    {
      page: '/',
      content:
        '&lt;template&gt;\n  &lt;OareContentView&gt;\n    &lt;v-row justify=&quot;center&quot; class=&quot;title font-weight-regular&quot;&gt;\n      &lt;v-col cols=&quot;12&quot; lg=&quot;10&quot;&gt;\n        &lt;p&gt;\n          Welcome to a pre-release of OARE (/’ôrə/) at\n          &lt;a href=&quot;https://oare.byu.edu&quot;&gt;oare.byu.edu&lt;/a&gt;.\n        &lt;/p&gt;\n        &lt;p&gt;\n          This website aims to offer published Old Assyrian texts for viewing\n          and eventually analysis.\n        &lt;/p&gt;\n        &lt;p&gt;\n          The intended purpose of the database is to facilitate work with the\n          Old Assyrian texts from the period of Kültepe Level II and Kültepe\n          Level Ib. OARE is organized to record textual and expert observations\n          arising from the interpretation, In this manner, it is intended to\n          facilitate collaborative research projects on the historical and\n          archaeological record of the Old Assyrian trade and society through\n          linguistic, lexical, economic, social, and other lenses.\n        &lt;/p&gt;\n        &lt;p&gt;\n          The core OARE database is part of the Online Cultural and Historical\n          Research Environment (OCHRE,\n          &lt;a href=&quot;https://oi.uchicago.edu/research/ochre-data-service&quot;\n            &gt;https://oi.uchicago.edu/research/ochre-data-service&lt;/a\n          &gt;).\n        &lt;/p&gt;\n        &lt;p&gt;\n          At present, only transliterations are available here. An initial\n          onomasticon, lexicon, gazetteer, and temporal period index are in\n          preparation for release. Asset and transaction indexes, a signlist and\n          bibliography are also planned.\n        &lt;/p&gt;\n        &lt;p&gt;\n          The sidebar search on the left prefers abbreviations used within the\n          Old Assyrian specialist community (thus TC 2 instead of TCL 14) and\n          only uses commas with reference to page numbers (thus TC 2 1 instead\n          of TC 2, 1). Consult the (i) buttons there and in the Search page to\n          find further search features.\n        &lt;/p&gt;\n        &lt;p class=&quot;blue--text text--lighten-1&quot;&gt;\n          &lt;em&gt;\n            Please be advised, we are still working out\n            &lt;router-link to=&quot;/issues&quot;&gt;issues&lt;/router-link&gt;. Use transliterations\n            at your own risk. Many texts display nicely, but some display errors\n            occasionally occur. In addition, we are still auditing the data.\n            Original transliterations of text published before roughly 2008\n            arise from the Old Assyrian Text Project and a few other sources.\n            Transliterations from more recent publications were checked within\n            OARE/OCHRE, but some errors were introduced in converting to the\n            format used for this database.&lt;/em\n          &gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n          At present, a traffic light symbol in front of the name of the text\n          displays the current status of the transliteration. The vast majority\n          are ‘yellow’ meaning the transliteration has not yet been checked.\n          Hovering over the traffic light icon will indicate what the displayed\n          colors mean for reliability of the transliteration.\n        &lt;/p&gt;\n        &lt;p&gt;\n          If you are interested in participating in the project, please consider\n          creating an account. Passwords chosen are not visible to us. We can\n          share Beta features with interested registered users upon request and\n          can make available further feedback mechanisms for development.\n          Registered users can mark texts that are misbehaving, or point out\n          errors. Anyone is invited to please send any feedback to\n          &lt;a href=&quot;mailto:oarefeedback@byu.edu&quot;&gt;oarefeedback@byu.edu&lt;/a&gt;.\n        &lt;/p&gt;\n      &lt;/v-col&gt;\n    &lt;/v-row&gt;\n  &lt;/OareContentView&gt;\n&lt;/template&gt;',
    },
  ];

  knex('page_content').insert(existingData);
}

export async function down(knex: Knex): Promise<void> {
  const tableExists = await knex.schema.hasTable('page_content');
  if (tableExists) {
    await knex.schema.dropTable('page_content');
  }
}
